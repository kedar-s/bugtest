<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:wiz="http://www.tolven.org/jsf/wizard"
      xmlns:trim="http://www.tolven.org/jsf/trim">
	<head>
   		<title>#{trim.trim.act.title.ST}</title>
   		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   		<script type="text/javascript" src="ePrescriptionScripts.js" />
	</head>
	<body>
		<ui:composition>
			<script type="text/javascript">
				if(flag==0) {
					loadMedicationDetails('#{menu.element}','#{menu.elementLabel}');		
				}
				flag=0;
			</script>
			<wiz:step title="#{msg.GettingStarted}" >
				<wiz:body>
					<!-- <p>You have received Refill Request from the pharmacy via Surescripts.
					You can review the information and then decide if you want to accept the 
					information or not.</p>
					<ol>
						<li>Approve the request.</li>
						<li>Approve with changes.</li>
						<li>Deny the new prescription.</li>
						<li>Deny.</li>
					</ol>		-->			
					<p>Click Next to Start.</p>
				</wiz:body>		
				<wiz:help>
					<h1>getting Started</h1>
					<p>Help provides additional information about each page</p>
					<p>You can close this form by clicking the [x] above at any time. The form will remain in your list of new activity so that yuo can continue at any time later.
						If you want to completely cancel the form prior to submission, removing all traces of the form from the system, click the Cancel button.
						Once submitted, you will not be able to Cancel the form.
					</p>
				</wiz:help>
			</wiz:step>
		    <wiz:step title="#{trim.trim.act.relationship['response'].act.title.ST}" >
				<wiz:body>		
					<wiz:group title="Medication Details">
						<table width ="80%" cellpadding="5">
							<tr>
								<td width="10%">
									#{trim.trim.act.relationship['medicationDetails'].act.observation.values[0].label.value} 
								</td>   
	               				<td  width="40%">
									<h:outputText  id="medicationName"  value="#{trim.trim.act.relationship['medicationDetails'].act.observation.values[0].ST.value}" />
								</td>
							</tr>
							<tr>
								<td width="10%">
									#{trim.trim.act.relationship['medicationDetails'].act.observation.values[1].label.value}
								</td>
								<td width="40%">
									<h:outputText id="strength" value="#{trim.trim.act.relationship['medicationDetails'].act.observation.values[1].ST.value}" />
								</td>
							</tr>
							<!-- <tr>
								<td width="10%">
									#{trim.trim.act.relationship['medicationDetails'].act.observation.values[2].label.value}
								</td>
								<td width="40%">
									<h:outputText id="dose" value="#{trim.trim.act.relationship['medicationDetails'].act.observation.values[2].ST.value}" />
								</td>
							</tr>
							<tr>
								<td width="10%">
									#{trim.trim.act.relationship['medicationDetails'].act.observation.values[3].label.value} 
								</td>          
	               				<td width="40%">
									<h:outputText id="frequency" value="#{trim.trim.act.relationship['medicationDetails'].act.observation.values[3].INT.value}"  />
								</td>	
							</tr> -->
							<tr>
								<td width="10%">
									#{trim.trim.act.relationship['medicationDetails'].act.observation.values[4].label.value} 
								</td>          
	               				<td width="40%">
									<h:outputText id="startDate" value="#{trim.trim.act.relationship['medicationDetails'].act.observation.values[4].ST.value}" />
								</td>	
							</tr>
							<tr>
								<td width="10%">
									#{trim.trim.act.relationship['medicationDetails'].act.observation.values[5].label.value} 
								</td>          
	               				<td width="40%">
									<h:outputText id="endDate" value="#{trim.trim.act.relationship['medicationDetails'].act.observation.values[5].ST.value}" />
								</td>	
							</tr>
							<tr>
								<td width="10%">
									#{trim.trim.act.relationship['medicationDetails'].act.observation.values[6].label.value} 
								</td>          
	               				<td width="40%">
									<h:outputText id="route" value="#{trim.trim.act.relationship['medicationDetails'].act.observation.values[6].ST.value}" size="20" />
								</td>	
							</tr>
							<tr>
								<td width="10%">
									#{trim.trim.act.relationship['medicationDetails'].act.observation.values[7].label.value} 
								</td>          
	               				<td width="40%">
									<h:outputText id="dispenseAmount" value="#{trim.trim.act.relationship['medicationDetails'].act.observation.values[7].ST.value}" size="20" />
								</td>	
							</tr>
							<tr>
								<td width="10%">
									#{trim.trim.act.relationship['medicationDetails'].act.observation.values[8].label.value} 
								</td>          
	               				<td width="40%">
									<h:inputText id="refills" onkeypress="return onlyNumbers(event);" onkeyup="checkRefillsAmount('#{menu.elementLabel}');" value="#{trim.trim.act.relationship['medicationDetails'].act.observation.values[8].ST.value}" size="20" maxlength="3" />
								</td>	
							</tr>
						</table>
					</wiz:group>
					 <wiz:group title="Response">
						<table  cellpadding="5" >
							<tr>
								<td width="10%">
									#{trim.trim.act.relationship['response'].act.observation.values[0].label.value} 
								</td>          
	               				<td width="40%">
									<wiz:radio id="response" value="#{trim.trim.act.relationship['response'].act.observation.values[0].CE}" layout="pageDirection">
				                 		 <f:selectItems value="#{trim.valueSets['response']}"/>
				                 		 <f:converter converterId="DataTypeConverter"/>
				                	</wiz:radio>
								</td>	
								<td>
									<table>
										<tr>
											<td>
												#{trim.trim.act.relationship['response'].act.observation.values[1].label.value} 
											</td>
											<td id="approved" evalFunc="wizDisableChildNodes('#{menu.elementLabel}','responseField:0',true,'approved')">
												<h:inputText id="noteForApproved" value="#{trim.trim.act.relationship['response'].act.observation.values[1].ST.value}" size="20" > </h:inputText>
											</td>
										</tr>
										<tr>
											<td>
												#{trim.trim.act.relationship['response'].act.observation.values[5].label.value} 
											</td>
											<td id="approvedWithChanges" evalFunc="wizDisableChildNodes('#{menu.elementLabel}','responseField:1',true,'approvedWithChanges')">
												<h:inputText id="noteForApprovedWithChanges" value="#{trim.trim.act.relationship['response'].act.observation.values[5].ST.value}" size="20" > </h:inputText>
											</td>
										</tr>										
										<tr>
											<td>
												#{trim.trim.act.relationship['response'].act.observation.values[2].label.value} 
											</td>
											<td id="deniedNewPrescription" evalFunc="wizDisableChildNodes('#{menu.elementLabel}','responseField:2',true,'deniedNewPrescription')">
												<h:inputText id="noteForDeniedNewPrescription" value="#{trim.trim.act.relationship['response'].act.observation.values[2].ST.value}" size="20" > </h:inputText>
											</td>
										</tr>
										<tr>
											<td>
												#{trim.trim.act.relationship['response'].act.observation.values[3].label.value} 
											</td>
											<td  colspan="2" id="denied" evalFunc="wizDisableChildNodes('#{menu.elementLabel}','responseField:3',true,'denied')">
												<trim:valueSetMenu id="denialReasonCode" slot="#{trim.trim.act.relationship['response'].act.observation.values[3]}"/>
											</td>
										</tr>
										<tr>
											<td>&nbsp;</td>
											<td tvisible="$('#{menu.elementLabel}:denialReasonCodemenu').selectedIndex == 16">
								    			<h:inputText id="denialReasonCodeDetail" value="#{trim.trim.act.relationship['response'].act.observation.values[4].ST.value}" />
											</td>
										</tr>
									</table> 
								</td>								
							</tr>
						</table>
					</wiz:group> 
			 	</wiz:body>
			</wiz:step>
  		</ui:composition>
  	</body>
 </html>
  