<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:wiz="http://www.tolven.org/jsf/wizard"
      xmlns:trim="http://www.tolven.org/jsf/trim">
	<head>
   		<title>Medication Wizard</title>
   		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   		<script type="text/javascript" src="tolven6.js" />
	</head>
	<body>
		<ui:composition>
			<ui:include src="dispensableDrugPopUp.xhtml"/>
			<wiz:step title="#{msg.GettingStarted}">
				<wiz:body>
					<p>The medication wizard allows the patient to record medications manually. 
					(Submissions are not routed to the provider.)</p>
					<p>Click Next to Start.</p>
				</wiz:body>
				<wiz:help>			
					<p>Help provides additional information about each page</p>					
				</wiz:help>
			</wiz:step>
			<wiz:step title="Patient Medication">
				<wiz:group title="#{trim.trim.act.relationship['medicationRecord'].act.title.ST}">
				<table width="80%" cellpadding="5">
					<tr>
						<td width="10%">
							#{trim.trim.act.relationship['medicationRecord'].act.observation.values[1].label.value}
						</td>
						<td width="40%">
							<trim:TS id="medicationDate"
								value="#{trim.trim.act.relationship['medicationRecord'].act.observation.values[1].TS}"
								dateStyle="short" timeStyle="short" type="both" />
						</td>
					</tr>
					<tr>
						<td width="10%">
							#{trim.trim.act.relationship['medicationRecord'].act.observation.values[0].label.value}
						</td>
						<td width="40%">
							<table width="100%">
								<tr>
									<td>
										<h:commandButton value="Add Medication"
											onclick="enablePopUP()" />
									</td>
									<td>
										<h:inputText id="medicineSelected" style="font-weight: bold;border: 0px;width: 500px;margin-left:50px" value="#{trim.trim.act.relationship['medicationRecord'].act.observation.values[0].ST.value}" required="true"/>
									</td>
								</tr>
							</table>
						</td>
					</tr>
					<tr>
						<td width="10%">
							#{trim.trim.act.relationship['medicationRecord'].act.observation.values[2].label.value}
						</td>
						<td width="40%">
							<h:inputText id="strength"
								value="#{trim.trim.act.relationship['medicationRecord'].act.observation.values[2].ST.value}"
								size="20" />
						</td>
					</tr>
					<tr>
						<td width="10%">
							#{trim.trim.act.relationship['medicationRecord'].act.observation.values[3].label.value}
						</td>
						<td width="40%">
							<h:inputText id="frequency"
								value="#{trim.trim.act.relationship['medicationRecord'].act.observation.values[3].INT.value}"
								size="20" />
						</td>
					</tr>
					<tr>
						<td width="10%">
							#{trim.trim.act.relationship['medicationRecord'].act.observation.values[4].label.value}
						</td>
						<td width="40%">
							<h:selectOneMenu id="route" value="#{trim.trim.act.relationship['medicationRecord'].act.observation.values[4].ST.value}" >
	               				<f:selectItems value="#{fdbstorage.routes}" />
	               			</h:selectOneMenu>							
						</td>
					</tr>
					<tr>
						<td width="10%">
							#{trim.trim.act.relationship['medicationRecord'].act.observation.values[5].label.value}
						</td>
						<td width="40%">
							<trim:TS id="startDate"
								value="#{trim.trim.act.relationship['medicationRecord'].act.observation.values[5].TS}"
								dateStyle="short" timeStyle="short" type="both" />
						</td>
					</tr>
					<tr>
						<td width="10%">
							#{trim.trim.act.relationship['medicationRecord'].act.observation.values[6].label.value}
						</td>
						<td width="40%">
							<trim:TS id="endDate"
								value="#{trim.trim.act.relationship['medicationRecord'].act.observation.values[6].TS}"
								dateStyle="short" timeStyle="short" type="both" />
						</td>
					</tr>
					<tr>
						<td width="10%">
							#{trim.trim.act.relationship['medicationRecord'].act.observation.values[7].label.value}
						</td>
						<td width="40%">
							<wiz:radio id="status"
								value="#{trim.trim.act.relationship['medicationRecord'].act.observation.values[7].CE}"
								layout="lineDirection">
								<f:selectItems value="#{trim.valueSets['status']}" />
								<f:converter converterId="DataTypeConverter" />
							</wiz:radio>
						</td>
					</tr>
				</table>
				</wiz:group>
			</wiz:step>
		</ui:composition>
	</body>
</html>